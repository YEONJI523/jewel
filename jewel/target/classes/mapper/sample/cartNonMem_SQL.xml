<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cartNonMem">
	
<!-- 비회원 장바구니  -->
	<!-- 장바구니 목록 -->
	<select id="selectCartList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				 *
				FROM
					(SELECT 
						rownum as RNUM, s.* 
					 FROM(
						SELECT 
							i.ITEM_IMAGE1,
							i.ITEM_NAME,
							c.CART_NUM,
							c.CART_CNT,
							c.OP_VALUE,
							c.ITEM_OP_PRICE
						FROM CART c, ITEM i
						WHERE c.MEM_ID = #{COOKIE_ID}
						AND c.ITEM_NUM = i.ITEM_NUM 
						order by CART_NUM desc)s)
					WHERE RNUM >= #{START_NUM} AND RNUM <= #{END_NUM}	
		]]>
	</select>
	<!-- 나의장바구니 페이징 -->
	<select id="cartTotal" parameterType="hashmap" resultType="int">
		<![CDATA[
			SELECT 
				COUNT(*)as TOTAL 
			FROM 
				CART 
			WHERE MEM_ID = #{COOKIE_ID}
		]]>
	</select>
	
	<insert id="insertCart" parameterType="hashmap">
		<![CDATA[
			INSERT INTO CART				 
				VALUES(
					CART_NUM_SEQ.NEXTVAL,
					#{COOKIE_ID},
					#{ITEM_NUM},
					#{CART_CNT},
					#{OP_VALUE},
					#{ITEM_OP_PRICE}
				)			
		]]>
	</insert>
	
	<update id="updateCart" parameterType="hashmap">
		<![CDATA[
			UPDATE CART SET 
				CART_CNT= #{CART_CNT}
			WHERE CART_NUM = #{CART_NUM}
			AND MEM_ID = #{COOKIE_ID}
		]]>
	</update>
	
	<delete id="deleteCart" parameterType="hashmap">
		<![CDATA[
			DELETE CART 
			WHERE CART_NUM = #{CART_NUM}
			AND MEM_ID = #{COOKIE_ID}
		]]>
	</delete>
	
</mapper>